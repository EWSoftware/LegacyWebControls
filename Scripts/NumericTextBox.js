//=============================================================================
// File    : NumericTextBox.js
// Author  : Eric Woodruff  (Eric@EWoodruff.us)
// Updated : 04/09/2003
function NTB_FormatNumeric(a){var b,c,d=".",e=0,f=false;var g,h,i,j,k=",";if(typeof(a.Validators)!="undefined"){g=a.Validators;for(b=0;b<g.length;b++){if(typeof(g[b].decimalchar)!="undefined")d=g[b].decimalchar;if(typeof(g[b].decplaces)!="undefined")e=parseInt(g[b].decplaces,10);if(typeof(g[b].digits)!="undefined")e=parseInt(g[b].digits,10);if(typeof(g[b].groupchar)!="undefined")k=g[b].groupchar;if(typeof(g[b].insdec)!="undefined")if(g[b].insdec.toLowerCase()=="true")f=true;else f=false;}if(k==d)k=(d==",")?".":"X";}j=new RegExp("[^0-9\\-\\+\\"+k+"\\"+d+"]","g");h=a.value.replace(j,"");if(isNaN(parseFloat(h)))return;i=h.charAt(0);if(i=="-"||i=="+")h=h.substr(1);else i="";while(h.charAt(0)=="0"&&h.charAt(1)!="."&&h.charAt(1)!="")h=h.substr(1);c=h.indexOf(d);if(e==0)h=Math.round(parseFloat(h)).toString();else if(c==-1){if(f==false){h+=d;while(e>0){h+="0";e--;}}else if(h.length>e)h=h.substr(0,h.length-e)+d+h.substr(h.length-e);else{e-=h.length;while(e>0){h="0"+h;e--;}h="0."+h;}}else{if(h.substr(c+1).length>e)h=h.substr(0,c+e+1);else{e-=h.substr(c+1).length;while(e>0){h+="0";e--;}}}if(h.charAt(0)==d)h="0"+h;h=i+h;if(h!=a.value){a.value=h;if(a.onchange!=null)a.onchange();}}